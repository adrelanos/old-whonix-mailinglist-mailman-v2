<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>

<!-- Mirrored from www.whonix.org/pipermail/whonix-devel/2016-May/000631.html by HTTraQt Website Copier/1.x [Karbofos 2012-2017] Wed, 29 Apr 2020 08:55:40 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<HEAD>
<TITLE> [Whonix-devel] revisiting decision of using stable as a Whonix base
</TITLE>
<script>window.mod_pagespeed_start = Number(new Date());</script><LINK REL=Index HREF=index.html>
<LINK REL=made HREF="mailto:whonix-devel%40whonix.org?Subject=Re%3A%20%5BWhonix-devel%5D%20revisiting%20decision%20of%20using%20stable%20as%20a%20Whonix%0A%20base&In-Reply-To=%3C5737AD92.6020306%40riseup.net%3E">
<META NAME=robots CONTENT="index,nofollow">
<style type="text/css">pre{white-space:pre-wrap}</style>
<META http-equiv=Content-Type content="text/html; charset=utf-8">
<LINK REL=Previous HREF=../../../../external.html?link=https://www.whonix.org/pipermail/whonix-devel/2016-May/000630.html>
<LINK REL=Next HREF=../../../../external.html?link=https://www.whonix.org/pipermail/whonix-devel/2016-May/000632.html>
</HEAD>
<BODY BGCOLOR="#ffffff">
<H1>[Whonix-devel] revisiting decision of using stable as a Whonix base</H1>
<B>Patrick Schleizer</B>
<A HREF="mailto:whonix-devel%40whonix.org?Subject=Re%3A%20%5BWhonix-devel%5D%20revisiting%20decision%20of%20using%20stable%20as%20a%20Whonix%0A%20base&In-Reply-To=%3C5737AD92.6020306%40riseup.net%3E" TITLE="[Whonix-devel] revisiting decision of using stable as a Whonix base">adrelanos at riseup.net
</A><BR>
<I>Sun May 15 00:58:26 CEST 2016</I>
<P><UL>
<LI>Previous message: <A HREF=../../../../external.html?link=https://www.whonix.org/pipermail/whonix-devel/2016-May/000630.html>[Whonix-devel] revisiting decision of using stable as a Whonix base
</A></LI>
<LI>Next message: <A HREF=../../../../external.html?link=https://www.whonix.org/pipermail/whonix-devel/2016-May/000632.html>[Whonix-devel] revisiting decision of using stable as a Whonix base
</A></LI>
<LI> <B>Messages sorted by:</B>
<a href="../../../../external.html?link=https://www.whonix.org/pipermail/whonix-devel/2016-May/date.html#631">[ date ]</a>
<a href="../../../../external.html?link=https://www.whonix.org/pipermail/whonix-devel/2016-May/thread.html#631">[ thread ]</a>
<a href="../../../../external.html?link=https://www.whonix.org/pipermail/whonix-devel/2016-May/subject.html#631">[ subject ]</a>
<a href="../../../../external.html?link=https://www.whonix.org/pipermail/whonix-devel/2016-May/author.html#631">[ author ]</a>
</LI>
</UL>
<HR>
<PRE><A HREF="../../../../external.html?link=https://www.whonix.org/cgi-bin/mailman/listinfo/whonix-devel">bancfc at openmailbox.org</A>:
&gt;<i> On 2016-05-13 22:41, Patrick Schleizer wrote:
</i>&gt;&gt;<i>
</i>&gt;&gt;<i> I don't think this is possible with the resources we have.
</i>&gt;<i> 
</i>&gt;<i> The lack of maintenance power is decisive but lets look away from it for
</i>&gt;<i> a minute to continue the thought exercise.
</i>
Ok.

&gt;&gt;<i>
</i>&gt;&gt;<i> We cannot manage /etc/apt/sources.list.d/debian.list though a Debian
</i>&gt;&gt;<i> package / apt-get.
</i>&gt;&gt;<i>
</i>&gt;&gt;<i> Let's say we had a a snapshot.debian.org in
</i>&gt;&gt;<i> /etc/apt/sources.list.d/debian.list as anon-apt-sources-list.
</i>&gt;&gt;<i>
</i>&gt;&gt;<i> At first run of apt-get would install a newer package of
</i>&gt;&gt;<i> anon-apt-sources-list would ship a newer
</i>&gt;&gt;<i> /etc/apt/sources.list.d/debian.list with a fresher snapshot and new
</i>&gt;&gt;<i> Whonix debian packages. Only then, on next run of apt-get update and
</i>&gt;&gt;<i> apt-get dist-upgrade, newer Debian packages would be installed. So the
</i>&gt;&gt;<i> Whonix packages would have to be tested and compatible with the older
</i>&gt;&gt;<i> and newer Debian packages.
</i>&gt;<i> 
</i>&gt;<i> Couldn't apt-during-apt help with this?
</i>
Not that I know.

apt-during-apt is a hack. Does not have a great way to install packages
that it just downloaded besides doing that at next boot. It can have one
package postinst have install another one or two packages or so. Such as
an ip2box package could download the i2p key and router packages. Not
suited for something as big as a suite upgrade or so.

&gt;<i> Postpone any new Whonix package
</i>&gt;<i> install until next time when anon-apt-sources package and the the new
</i>&gt;<i> snapshot packages have had a chance to upgrade?
</i>
Somehow the Debian repository could be disabled using apt-pinning
mechanism. But then users could also not install any new packages on
their own. Unless there are more hacks around apt-get.

&gt;&gt;<i>
</i>&gt;&gt;<i> Or use some other mechanism to guide upgrades, something outside of
</i>&gt;&gt;<i> apt-get which is not great, reinventing such a system.
</i>&gt;&gt;<i>
</i>&gt;&gt;<i> What would work in theory would be not using the official Debian
</i>&gt;&gt;<i> repository, but a mirror of all Debian packages under Whonix control. So
</i>&gt;&gt;<i> packages are only made available to everyone once they have been tested
</i>&gt;&gt;<i> for Whonix compatibility. Ubuntu does something similar. They freeze
</i>&gt;&gt;<i> Debian testing, stabilize and support.
</i>&gt;&gt;<i>
</i>&gt;&gt;<i> I don't think we have enough reliable working hours per week or even per
</i>&gt;&gt;<i> month to get this done. And I can't do it alone, because then this would
</i>&gt;&gt;<i> be kinda my only task.
</i>&gt;<i> 
</i>&gt;<i> From what I understand Debian snapshots include packages in the whole
</i>&gt;<i> archive - its essentially a wayback machine for the official repos.
</i>
Somewhat like that. A snapshot of the state of the repository at that
date/time, which will never change. No upgrades ever. Unless upgrading
to a newer snapshot.

&gt;<i> Every two years you usually have to go thru the dependency testing
</i>&gt;<i> process with every major stable upgrade.
</i>
Yes.

&gt;<i> With snapshots you have more control of when the system packages get to
</i>&gt;<i> transition.
</i>
Also at the moment there won't uncontrolled suite (ex: wheezy -&gt; jessie)
upgrades, because we are using specific codenames (ex: jessie) in apt
sources lists and not generic codenames such as stable. The specific
codenames will on purpose never be automagically upgraded by Debian
maintainers. (Generic ones would, that is what they are for.)

This was done since Whonix 9 and discussed here:

<A HREF="../../../../external.html?link=https://forums.whonix.org/t/done-use-wheezy-or-stable-in-etc-apt-sources-list-d-debian-list">https://forums.whonix.org/t/done-use-wheezy-or-stable-in-etc-apt-sources-list-d-debian-list</A>

&gt;<i> Lets say you update the snapshot every year or even 6 months
</i>&gt;<i> or whenever it suits you. This is still a win from a security point
</i>&gt;<i> because exposure time is less than waiting for a new stable snapshot.
</i>
Security fixes are uploaded more often than on a 6 month cycle. There
are so many new security fixes alone in stable, it's impossible to keep
track of them. If I had to test each of them in advance, I don't think
that would work. But on testing it's not just security fixes, these can
be mixed up with package upgrades.

Let's say hypothetically we used
<A HREF="../../../../external.html?link=http://snapshot.debian.org/archive/debian/20160101T111320Z/">http://snapshot.debian.org/archive/debian/20160101T111320Z/</A> (2016 01 01
T111320Z). Two months later, a there is a remotely exploitable
vulnerability when using ssh as a client. Then users would not get any
upgrades. Unless we transition to a newer snapshot. But this newer
snapshot comes with all the required testing work and dependency stuff.
In meanwhile they could have even made changes as big as changing from
sysvinit to systemd. Unless we had someone to keep track of these
security fixes, to backport them to our snapshot and upload that.

&gt;<i> Also if something turns out to be badly broken in the future stable
</i>&gt;<i> release you can wait it out
</i>
As explained above, future stable releases that would not work for
Whonix and would require more upgrading work would not be an issue at all.

Debian Testing: is like me &quot;against&quot; the whole crew of Debian
maintainers being super active with new releases.

Debian Stable: No changes besides minor security changes. Can even add
specific codenames and directly use Debian repository without need to
monitor too closely what the bleeding edge in Debian is up to.

&gt;<i> and skip to a newer snapshot where its
</i>&gt;<i> fixed. Essentially instead of syncing Whonix development around Debian's
</i>&gt;<i> release schedule you instead work around your own - which hopefully
</i>&gt;<i> means more frequent package upgrades. If its still too much then its a
</i>&gt;<i> non-starter but at least its been explored.
</i>&gt;<i> 
</i>&gt;&gt;<i>
</i>&gt;&gt;<i> As a half baked solution there could be a maintainer who provides a
</i>&gt;&gt;<i> Whonix version based on Debian testing who provides patches to make
</i>&gt;&gt;<i> Whonix compatible with both stable and testing.
</i>&gt;&gt;<i>
</i>&gt;&gt;<i> Cheers,
</i>&gt;&gt;<i> Patrick
</i>&gt;<i> 
</i>&gt;<i> 
</i>
</PRE>
<HR>
<P><UL>
<LI>Previous message: <A HREF=../../../../external.html?link=https://www.whonix.org/pipermail/whonix-devel/2016-May/000630.html>[Whonix-devel] revisiting decision of using stable as a Whonix base
</A></LI>
<LI>Next message: <A HREF=../../../../external.html?link=https://www.whonix.org/pipermail/whonix-devel/2016-May/000632.html>[Whonix-devel] revisiting decision of using stable as a Whonix base
</A></LI>
<LI> <B>Messages sorted by:</B>
<a href="../../../../external.html?link=https://www.whonix.org/pipermail/whonix-devel/2016-May/date.html#631">[ date ]</a>
<a href="../../../../external.html?link=https://www.whonix.org/pipermail/whonix-devel/2016-May/thread.html#631">[ thread ]</a>
<a href="../../../../external.html?link=https://www.whonix.org/pipermail/whonix-devel/2016-May/subject.html#631">[ subject ]</a>
<a href="../../../../external.html?link=https://www.whonix.org/pipermail/whonix-devel/2016-May/author.html#631">[ author ]</a>
</LI>
</UL>
<hr>
<a href="../../../../external.html?link=https://www.whonix.org/cgi-bin/mailman/listinfo/Whonix-devel">More information about the Whonix-devel
mailing list</a><br>
<script data-pagespeed-no-defer type="text/javascript">(function(){function f(b){var a=window;if(a.addEventListener)a.addEventListener("load",b,!1);else if(a.attachEvent)a.attachEvent("onload",b);else{var c=a.onload;a.onload=function(){b.call(this);c&&c.call(this)}}};window.pagespeed=window.pagespeed||{};var k=window.pagespeed;function l(b,a,c,g,h){this.h=b;this.i=a;this.l=c;this.j=g;this.b=h;this.c=[];this.a=0}l.prototype.f=function(b){for(var a=0;250>a&&this.a<this.b.length;++a,++this.a)try{document.querySelector(this.b[this.a])&&this.c.push(this.b[this.a])}catch(c){}this.a<this.b.length?window.setTimeout(this.f.bind(this),0,b):b()};
k.g=function(b,a,c,g,h){if(document.querySelector&&Function.prototype.bind){var d=new l(b,a,c,g,h);f(function(){window.setTimeout(function(){d.f(function(){for(var a="oh="+d.l+"&n="+d.j,a=a+"&cs=",b=0;b<d.c.length;++b){var c=0<b?",":"",c=c+encodeURIComponent(d.c[b]);if(131072<a.length+c.length)break;a+=c}k.criticalCssBeaconData=a;var b=d.h,c=d.i,e;if(window.XMLHttpRequest)e=new XMLHttpRequest;else if(window.ActiveXObject)try{e=new ActiveXObject("Msxml2.XMLHTTP")}catch(m){try{e=new ActiveXObject("Microsoft.XMLHTTP")}catch(n){}}e&&
(e.open("../../../../external.html?link=https://www.whonix.org/pipermail/whonix-devel/2016-May/POST",b+(-1==b.indexOf("?")?"?":"&")+"url="+encodeURIComponent(c)),e.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),e.send(a))})},0)})}};k.criticalCssBeaconInit=k.g;})();
pagespeed.selectors=["pre"];pagespeed.criticalCssBeaconInit('/ngx_pagespeed_beacon','../../../../external.html?link=https://www.whonix.org/pipermail/whonix-devel/2016-May/000631.html','y7aelHq7wr','4H_pO-hMI2U',pagespeed.selectors);</script><script data-pagespeed-no-defer type="text/javascript">(function(){window.pagespeed=window.pagespeed||{};var f=window.pagespeed;function h(c,a,e,b){this.f=c;this.a=a;this.b=e;this.g=b}f.beaconUrl="";
function k(c){var a=c.f,e=window.mod_pagespeed_start,b=Number(new Date)-e,a=a+(-1==a.indexOf("?")?"?":"&"),a=a+"ets="+("load"==c.a?"load:":"unload:");if("beforeunload"!=c.a||!window.mod_pagespeed_loaded){a=a+b+("&r"+c.a+"=");if(window.performance){var b=window.performance.timing,d=b.navigationStart,g=b.requestStart,a=a+(b[c.a+"EventStart"]-d),a=a+("&nav="+(b.fetchStart-d)),a=a+("&dns="+(b.domainLookupEnd-b.domainLookupStart)),a=a+("&connect="+(b.connectEnd-b.connectStart)),a=a+("&req_start="+(g-d))+
("&ttfb="+(b.responseStart-g)),a=a+("&dwld="+(b.responseEnd-b.responseStart)),a=a+("&dom_c="+(b.domContentLoadedEventStart-d));window.performance.navigation&&(a+="&nt="+window.performance.navigation.type);d=-1;b.msFirstPaint?d=b.msFirstPaint:window.chrome&&window.chrome.loadTimes&&(d=Math.floor(1E3*window.chrome.loadTimes().firstPaintTime));d-=g;0<=d&&(a+="&fp="+d)}else a+=b;f.getResourceTimingData&&window.parent==window&&(a+=f.getResourceTimingData());a+=window.parent!=window?"&ifr=1":"&ifr=0";"load"==
c.a&&(window.mod_pagespeed_loaded=!0,(b=window.mod_pagespeed_num_resources_prefetched)&&(a+="&nrp="+b),(b=window.mod_pagespeed_prefetch_start)&&(a+="&htmlAt="+(e-b)));f.criticalCss&&(e=f.criticalCss,a+="&ccis="+e.total_critical_inlined_size+"&cces="+e.total_original_external_size+"&ccos="+e.total_overhead_size+"&ccrl="+e.num_replaced_links+"&ccul="+e.num_unreplaced_links);a+="&dpr="+window.devicePixelRatio;""!=c.b&&(a+=c.b);document.referrer&&(a+="&ref="+encodeURIComponent(document.referrer));a+=
"&url="+encodeURIComponent(c.g);f.beaconUrl=a;(new Image).src=a}}f.c=function(c,a,e,b){var d=new h(c,a,e,b);window.addEventListener?window.addEventListener(a,function(){k(d)},!1):window.attachEvent("on"+a,function(){k(d)})};f.addInstrumentationInit=f.c;})();

pagespeed.addInstrumentationInit('/ngx_pagespeed_beacon', 'load', '', '../../../../external.html?link=https://www.whonix.org/pipermail/whonix-devel/2016-May/000631.html');</script></BODY>
<!-- Mirrored from www.whonix.org/pipermail/whonix-devel/2016-May/000631.html by HTTraQt Website Copier/1.x [Karbofos 2012-2017] Wed, 29 Apr 2020 08:55:40 GMT -->
</HTML>
